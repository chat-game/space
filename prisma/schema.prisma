generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Profile {
  id        String   @id
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @default(now()) @map("updated_at")
  twitchId  String   @map("twitch_id")
  userName  String   @map("user_name")

  @@map("profile")
}

model TwitchAccessToken {
  userId              String   @id @map("user_id")
  accessToken         String   @map("access_token")
  refreshToken        String?  @map("refresh_token")
  scope               String[] @map("scope")
  expiresIn           Int?     @map("expires_in")
  obtainmentTimestamp String   @map("obtainment_timestamp")

  @@map("twitch_access_token")
}

model Village {
  id                  String   @id
  createdAt           DateTime @default(now()) @map("created_at")
  updatedAt           DateTime @default(now()) @map("updated_at")
  globalTarget        Int?     @map("global_target")
  globalTargetSuccess Int?     @map("global_target_success")
  wood                Int      @default(0) @map("wood")
  stone               Int      @default(0) @map("stone")

  @@map("village")
}

model Player {
  id              String   @id
  createdAt       DateTime @default(now()) @map("created_at")
  updatedAt       DateTime @default(now()) @map("updated_at")
  lastActionAt    DateTime @default(now()) @map("last_action_at")
  name            String   @map("name")
  coins           Int      @default(0)
  reputation      Int      @default(0)
  viewerPoints    Int      @default(0) @map("viewer_points")
  villainPoints   Int      @default(0) @map("villain_points")
  refuellerPoints Int      @default(0) @map("refueller_points")
  raiderPoints    Int      @default(0) @map("raider_points")
  inventoryId     String   @map("inventory_id")
  profileId       String   @map("profile_id")

  @@map("player")
}

model Skill {
  id        String   @id
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @default(now()) @map("updated_at")
  type      String
  lvl       Int      @default(0)
  xp        Int      @default(0)
  xpNextLvl Int      @default(20) @map("xp_next_lvl")
  objectId  String   @map("object_id")

  @@map("skill")
}

model Inventory {
  id        String          @id
  createdAt DateTime        @default(now()) @map("created_at")
  updatedAt DateTime        @default(now()) @map("updated_at")
  objectId  String          @map("object_id")
  items     InventoryItem[]

  @@map("inventory")
}

model InventoryItem {
  id          String    @id
  createdAt   DateTime  @default(now()) @map("created_at")
  updatedAt   DateTime  @default(now()) @map("updated_at")
  inventoryId String    @map("inventory_id")
  inventory   Inventory @relation(fields: [inventoryId], references: [id])
  type        String
  amount      Int       @default(1)
  durability  Int       @default(100)

  @@map("inventory_item")
}

model ChatCommand {
  id      String @id
  action  String
  command String

  @@map("chat_command")
}

model Character {
  id          String   @id
  createdAt   DateTime @default(now()) @map("created_at")
  updatedAt   DateTime @default(now()) @map("updated_at")
  name        String
  description String

  @@map("character")
}

model Post {
  id        String   @id
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @default(now()) @map("updated_at")
  authorId  String   @map("author_id")
  text      String

  @@map("post")
}
